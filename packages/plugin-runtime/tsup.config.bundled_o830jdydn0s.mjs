// tsup.config.ts
import { defineConfig } from "tsup";
import nodePreset from "@kb-labs/devkit/tsup/node.js";
var tsup_config_default = defineConfig({
  ...nodePreset,
  tsconfig: "tsconfig.build.json",
  entry: {
    index: "src/index.ts",
    "sandbox/index": "src/sandbox/index.ts",
    "sandbox/bootstrap": "src/sandbox/bootstrap.ts"
  },
  // Override external to bundle plugin-contracts-v3 into bootstrap
  // Bootstrap needs to be standalone when forked as subprocess (no access to node_modules)
  external: [
    // Bundle @kb-labs/plugin-contracts and @kb-labs/shared-cli-ui (remove from external list)
    // Keep only Node.js built-ins external
    /^node:/,
    // Keep 'fs' external for sync fallback support
    "fs"
  ],
  noExternal: [
    "@kb-labs/plugin-contracts",
    // Explicitly bundle this
    "@kb-labs/shared-cli-ui"
    // Explicitly bundle this (needed for bootstrap)
  ]
});
export {
  tsup_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidHN1cC5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9faW5qZWN0ZWRfZmlsZW5hbWVfXyA9IFwiL1VzZXJzL2tpcmlsbGJhcmFub3YvRGVza3RvcC9rYi1sYWJzL2tiLWxhYnMtcGx1Z2luL3BhY2thZ2VzL3BsdWdpbi1ydW50aW1lL3RzdXAuY29uZmlnLnRzXCI7Y29uc3QgX19pbmplY3RlZF9kaXJuYW1lX18gPSBcIi9Vc2Vycy9raXJpbGxiYXJhbm92L0Rlc2t0b3Ava2ItbGFicy9rYi1sYWJzLXBsdWdpbi9wYWNrYWdlcy9wbHVnaW4tcnVudGltZVwiO2NvbnN0IF9faW5qZWN0ZWRfaW1wb3J0X21ldGFfdXJsX18gPSBcImZpbGU6Ly8vVXNlcnMva2lyaWxsYmFyYW5vdi9EZXNrdG9wL2tiLWxhYnMva2ItbGFicy1wbHVnaW4vcGFja2FnZXMvcGx1Z2luLXJ1bnRpbWUvdHN1cC5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tICd0c3VwJ1xuaW1wb3J0IG5vZGVQcmVzZXQgZnJvbSAnQGtiLWxhYnMvZGV2a2l0L3RzdXAvbm9kZS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcbiAgLi4ubm9kZVByZXNldCxcbiAgdHNjb25maWc6IFwidHNjb25maWcuYnVpbGQuanNvblwiLFxuICBlbnRyeToge1xuICAgIGluZGV4OiAnc3JjL2luZGV4LnRzJyxcbiAgICAnc2FuZGJveC9pbmRleCc6ICdzcmMvc2FuZGJveC9pbmRleC50cycsXG4gICAgJ3NhbmRib3gvYm9vdHN0cmFwJzogJ3NyYy9zYW5kYm94L2Jvb3RzdHJhcC50cycsXG4gIH0sXG4gIC8vIE92ZXJyaWRlIGV4dGVybmFsIHRvIGJ1bmRsZSBwbHVnaW4tY29udHJhY3RzLXYzIGludG8gYm9vdHN0cmFwXG4gIC8vIEJvb3RzdHJhcCBuZWVkcyB0byBiZSBzdGFuZGFsb25lIHdoZW4gZm9ya2VkIGFzIHN1YnByb2Nlc3MgKG5vIGFjY2VzcyB0byBub2RlX21vZHVsZXMpXG4gIGV4dGVybmFsOiBbXG4gICAgLy8gQnVuZGxlIEBrYi1sYWJzL3BsdWdpbi1jb250cmFjdHMgYW5kIEBrYi1sYWJzL3NoYXJlZC1jbGktdWkgKHJlbW92ZSBmcm9tIGV4dGVybmFsIGxpc3QpXG4gICAgLy8gS2VlcCBvbmx5IE5vZGUuanMgYnVpbHQtaW5zIGV4dGVybmFsXG4gICAgL15ub2RlOi8sXG4gICAgLy8gS2VlcCAnZnMnIGV4dGVybmFsIGZvciBzeW5jIGZhbGxiYWNrIHN1cHBvcnRcbiAgICAnZnMnLFxuICBdLFxuICBub0V4dGVybmFsOiBbXG4gICAgJ0BrYi1sYWJzL3BsdWdpbi1jb250cmFjdHMnLCAvLyBFeHBsaWNpdGx5IGJ1bmRsZSB0aGlzXG4gICAgJ0BrYi1sYWJzL3NoYXJlZC1jbGktdWknLCAvLyBFeHBsaWNpdGx5IGJ1bmRsZSB0aGlzIChuZWVkZWQgZm9yIGJvb3RzdHJhcClcbiAgXSxcbn0pXG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQStXLFNBQVMsb0JBQW9CO0FBQzVZLE9BQU8sZ0JBQWdCO0FBRXZCLElBQU8sc0JBQVEsYUFBYTtBQUFBLEVBQzFCLEdBQUc7QUFBQSxFQUNILFVBQVU7QUFBQSxFQUNWLE9BQU87QUFBQSxJQUNMLE9BQU87QUFBQSxJQUNQLGlCQUFpQjtBQUFBLElBQ2pCLHFCQUFxQjtBQUFBLEVBQ3ZCO0FBQUE7QUFBQTtBQUFBLEVBR0EsVUFBVTtBQUFBO0FBQUE7QUFBQSxJQUdSO0FBQUE7QUFBQSxJQUVBO0FBQUEsRUFDRjtBQUFBLEVBQ0EsWUFBWTtBQUFBLElBQ1Y7QUFBQTtBQUFBLElBQ0E7QUFBQTtBQUFBLEVBQ0Y7QUFDRixDQUFDOyIsCiAgIm5hbWVzIjogW10KfQo=
